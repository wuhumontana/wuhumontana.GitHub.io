<html>
  <head>
    <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Day 59 | 503. Next Greater Element II | 42. Trapping Rain Water | Kyle Wang</title>
<link rel="shortcut icon" href="https://wuhumontana.github.io/favicon.ico?v=1703739981162">
<link href="https://cdn.jsdelivr.net/npm/remixicon@2.3.0/fonts/remixicon.css" rel="stylesheet">
<link rel="stylesheet" href="https://wuhumontana.github.io/styles/main.css">
<link rel="alternate" type="application/atom+xml" title="Day 59 | 503. Next Greater Element II | 42. Trapping Rain Water | Kyle Wang - Atom Feed" href="https://wuhumontana.github.io/atom.xml">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Droid+Serif:400,700">



    <meta name="description" content="Day 1 | 704. Binary Search | 27. Remove Element | 35. Search Insert Position | 34. First and Last Position of Element in..." />
    <meta name="keywords" content="LeetCode" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
    <script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.5.1/build/highlight.min.js"></script>
  </head>
  <body>
    <div class="main">
      <div class="main-content">
        <div class="site-header">
  <a href="https://wuhumontana.github.io">
  <img class="avatar" src="https://wuhumontana.github.io/images/avatar.png?v=1703739981162" alt="">
  </a>
  <h1 class="site-title">
    Kyle Wang
  </h1>
  <p class="site-description">
    信于心，简于行
  </p>
  <div class="menu-container">
    
      
        <a href="/" class="menu">
          BLOG
        </a>
      
    
      
        <a href="/archives" class="menu">
          ARCHIVES
        </a>
      
    
      
        <a href="/tags" class="menu">
          TAGS
        </a>
      
    
      
        <a href="/post/about" class="menu">
          ABOUT
        </a>
      
    
      
        <a href="https://drive.google.com/file/d/1f1832sd3IH4upYbMtzynXYrUbx0MiqDx/view?usp=drive_link" class="menu">
          CV
        </a>
      
    
  </div>
  <div class="social-container">
    
      
        <a href="https://github.com/wuhumontana" target="_blank">
          <i class="ri-github-line"></i>
        </a>
      
    
      
    
      
    
      
    
      
    
  </div>
</div>

        <div class="post-detail">
          <article class="post">
            <h2 class="post-title">
              Day 59 | 503. Next Greater Element II | 42. Trapping Rain Water
            </h2>
            <div class="post-info">
              <span>
                2023-08-16
              </span>
              <span>
                7 min read
              </span>
              
                <a href="https://wuhumontana.github.io/tag/FabkVlWLr/" class="post-tag">
                  # LeetCode
                </a>
              
            </div>
            
              <img class="post-feature-image" src="https://wuhumontana.github.io/post-images/day-59-or-503-next-greater-element-ii-or-42-trapping-rain-water.jpg" alt="">
            
            <div class="post-content-wrapper">
              <div class="post-content" v-pre>
                <p><a href="https://blog.csdn.net/kyle313606922/article/details/128260518">Day 1 | 704. Binary Search | 27. Remove Element | 35. Search Insert Position | 34. First and Last Position of Element in Sorted Array</a><br>
<a href="https://blog.csdn.net/kyle313606922/article/details/128272450">Day 2 | 977. Squares of a Sorted Array | 209. Minimum Size Subarray Sum | 59. Spiral Matrix II</a><br>
<a href="https://blog.csdn.net/kyle313606922/article/details/128281122">Day 3 | 203. Remove Linked List Elements | 707. Design Linked List | 206. Reverse Linked List</a><br>
<a href="https://blog.csdn.net/kyle313606922/article/details/128295618">Day 4 | 24. Swap Nodes in Pairs| 19. Remove Nth Node From End of List| 160.Intersection of Two Lists</a><br>
<a href="https://blog.csdn.net/kyle313606922/article/details/128310593">Day 6 | 242. Valid Anagram | 349. Intersection of Two Arrays | 202. Happy Numbe | 1. Two Sum</a><br>
<a href="https://blog.csdn.net/kyle313606922/article/details/128324032">Day 7 | 454. 4Sum II | 383. Ransom Note | 15. 3Sum | 18. 4Sum</a><br>
<a href="https://blog.csdn.net/kyle313606922/article/details/128325957">Day 8 | 344. Reverse String | 541. Reverse String II | 替换空格 | 151.Reverse Words in a String | 左旋转字符串</a><br>
<a href="https://blog.csdn.net/kyle313606922/article/details/128337737">Day 9 | 28. Find the Index of the First Occurrence in a String | 459. Repeated Substring Pattern</a><br>
<a href="https://blog.csdn.net/kyle313606922/article/details/128358488">Day 10 | 232. Implement Queue using Stacks | 225. Implement Stack using Queue</a><br>
<a href="https://blog.csdn.net/kyle313606922/article/details/128359564">Day 11 | 20. Valid Parentheses | 1047. Remove All Adjacent Duplicates In String | 150. Evaluate RPN</a><br>
<a href="https://blog.csdn.net/kyle313606922/article/details/128382265">Day 13 | 239. Sliding Window Maximum | 347. Top K Frequent Elements</a><br>
<a href="https://blog.csdn.net/kyle313606922/article/details/128392214">Day 14 | 144.Binary Tree Preorder Traversal | 94.Binary Tree Inorder Traversal| 145.Binary Tree Postorder Traversal</a><br>
<a href="https://blog.csdn.net/kyle313606922/article/details/128405092">Day 15 | 102. Binary Tree Level Order Traversal | 226. Invert Binary Tree | 101. Symmetric Tree</a><br>
<a href="https://blog.csdn.net/kyle313606922/article/details/128415322">Day 16 | 104.MaximumDepth of BinaryTree| 111.MinimumDepth of BinaryTree| 222.CountComplete TreeNodes</a><br>
<a href="https://blog.csdn.net/kyle313606922/article/details/128415322">Day 17 | 110. Balanced Binary Tree | 257. Binary Tree Paths | 404. Sum of Left Leaves</a><br>
<a href="https://blog.csdn.net/kyle313606922/article/details/128451752">Day 18 | 513. Find Bottom Left Tree Value | 112. Path Sum | 105&amp;106. Construct Binary Tree</a><br>
<a href="https://blog.csdn.net/kyle313606922/article/details/128466708">Day 20 | 654. Maximum Binary Tree | 617. Merge Two Binary Trees | 700.Search in a Binary Search Tree</a><br>
<a href="https://blog.csdn.net/kyle313606922/article/details/128477578">Day 21 | 530. Minimum Absolute Difference in BST | 501. Find Mode in Binary Search Tree | 236. Lowes</a><br>
<a href="https://blog.csdn.net/kyle313606922/article/details/128490148">Day 22 | 235. Lowest Common Ancestor of a BST | 701. Insert into a BST | 450. Delete Node in a BST</a><br>
<a href="https://blog.csdn.net/kyle313606922/article/details/128542480">Day 23 | 669. Trim a BST | 108. Convert Sorted Array to BST | 538. Convert BST to Greater Tree</a><br>
<a href="https://blog.csdn.net/kyle313606922/article/details/128572676">Day 24 | 77. Combinations</a><br>
<a href="https://blog.csdn.net/kyle313606922/article/details/128588207">Day 25 | 216. Combination Sum III | 17. Letter Combinations of a Phone Number</a><br>
<a href="https://blog.csdn.net/kyle313606922/article/details/128597793">Day 27 | 39. Combination Sum | 40. Combination Sum II | 131. Palindrome Partitioning</a><br>
<a href="https://blog.csdn.net/kyle313606922/article/details/128608537">Day 28 | 93. Restore IP Addresses | 78. Subsets | 90. Subsets II</a><br>
<a href="https://blog.csdn.net/kyle313606922/article/details/128623556">Day 29 | 491. Non-decreasing Subsequences | 46. Permutations | 47. Permutations II</a><br>
<a href="https://blog.csdn.net/kyle313606922/article/details/128638800">Day 30 | 332. Reconstruct Itinerary | 51. N-Queens | 37. Sudoku Solver</a><br>
<a href="https://blog.csdn.net/kyle313606922/article/details/128691410">Day 31 | 455. Assign Cookies | 376. Wiggle Subsequence | 53. Maximum Subarray</a><br>
<a href="https://blog.csdn.net/kyle313606922/article/details/128692538">Day 32 | 122. Best Time to Buy and Sell Stock II | 55. Jump Game | 45. Jump Game II</a><br>
<a href="https://blog.csdn.net/kyle313606922/article/details/128702162">Day 34 | 1005. Maximize Sum Of Array After K Negations | 134. Gas Station | 135. Candy</a><br>
<a href="https://blog.csdn.net/kyle313606922/article/details/128710612">Day 35 | 860. Lemonade Change | 406. Queue Reconstruction by Height | 452. Minimum Number of Arrows</a><br>
<a href="https://blog.csdn.net/kyle313606922/article/details/128722599">Day 36 | 435. Non-overlapping Intervals | 763. Partition Labels | 56. Merge Intervals</a><br>
<a href="https://blog.csdn.net/kyle313606922/article/details/128733183">Day 37 | 738. Monotone Increasing Digits | 714. Best Time to Buy and Sell Stock | 968. BT Camera</a><br>
<a href="https://blog.csdn.net/kyle313606922/article/details/128740765">Day 38 | 509. Fibonacci Number | 70. Climbing Stairs | 746. Min Cost Climbing Stairs</a><br>
<a href="https://blog.csdn.net/kyle313606922/article/details/128745450">Day 39 | 62. Unique Paths | 63. Unique Paths II</a><br>
<a href="https://blog.csdn.net/kyle313606922/article/details/128798243">Day 41 | 343. Integer Break | 96. Unique Binary Search Trees</a><br>
<a href="https://blog.csdn.net/kyle313606922/article/details/130127811">Day 42 | 0-1 Backpack Basic Theory（一）| 0-1 Backpack Basic Theory（二）| 416. Partition Equal Subset Sum</a><br>
<a href="https://blog.csdn.net/kyle313606922/article/details/131152206">Day 43 | 1049. Last Stone Weight II | 494. Target Sum | 474. Ones and Zeroes</a><br>
<a href="https://blog.csdn.net/kyle313606922/article/details/131343344">Day 44 | Full Backpack Basic Theory | 518. Coin Change II | 377. Combination Sum IV</a><br>
<a href="https://blog.csdn.net/kyle313606922/article/details/131812493">Day 45 | 70. Climbing Stairs | 322. Coin Change | 279. Perfect Squares</a><br>
<a href="https://blog.csdn.net/kyle313606922/article/details/131866549">Day 46 | 139. Word Break | Backpack Question Summary</a><br>
<a href="https://blog.csdn.net/kyle313606922/article/details/131898436">Day 48 | 198. House Robber | 213. House Robber II | 337. House Robber III</a><br>
<a href="https://blog.csdn.net/kyle313606922/article/details/131936265">Day 49 | 121. Best Time to Buy and Sell Stock I | 122. Best Time to Buy and Sell Stock II</a><br>
<a href="https://blog.csdn.net/kyle313606922/article/details/132041808">Day 50 | 123. Best Time to Buy and Sell Stock III | 188. Best Time to Buy and Sell Stock IV</a><br>
<a href="https://blog.csdn.net/kyle313606922/article/details/132045089">Day 51 | 309. Best Time to Buy and Sell Stock with Cooldown | 714. with Transaction Fee</a><br>
<a href="https://blog.csdn.net/kyle313606922/article/details/132051515">Day 52 | 300. Longest Increasing Subsequence | 674. Longest Continuous Increasing Subsequence | 718. Maximum Length of Repeated Subarray</a><br>
<a href="https://blog.csdn.net/kyle313606922/article/details/132080167">Day 53 | 1143. Longest Common Subsequence | 1035. Uncrossed Lines | 53. Maximum Subarray</a><br>
<a href="https://blog.csdn.net/kyle313606922/article/details/132108800">Day 55 | 392. Is Subsequence | 115. Distinct Subsequences</a><br>
<a href="https://blog.csdn.net/kyle313606922/article/details/132114441">Day 56 | 583. Delete Operation for Two Strings | 72. Edit Distance</a><br>
<a href="https://blog.csdn.net/kyle313606922/article/details/132164712">Day 57 | 647. Palindromic Substrings | 516. Longest Palindromic Subsequence</a><br>
<a href="https://blog.csdn.net/kyle313606922/article/details/132192508">Day 58 | 739. Daily Temperatures | 496. Next Greater Element I</a></p>
<p><ul class="markdownIt-TOC">
<li><a href="#503-next-greater-element-ii">503. Next Greater Element II</a></li>
<li><a href="#42-trapping-rain-water">42. Trapping Rain Water</a></li>
</ul>
(Directory)</p>
<hr>
<h1 id="503-next-greater-element-ii">503. Next Greater Element II</h1>
<p><a href="https://leetcode.com/problems/next-greater-element-ii/">Question Link</a></p>
<pre><code class="language-java">class Solution {
    public int[] nextGreaterElements(int[] nums) {
        Stack&lt;Integer&gt; stack = new Stack&lt;&gt;();
        stack.add(0);

        int[] res = new int[nums.length];
        Arrays.fill(res, -1);

        int len = nums.length;
        for(int i = 1; i &lt; len*2; i++){
            if(nums[i % len] &lt;= nums[stack.peek()])
                stack.add(i % len);
            else{
                while(!stack.isEmpty() &amp;&amp; nums[i % len] &gt; nums[stack.peek()]){
                    res[stack.peek()] = nums[i % len];
                    stack.pop();
                }
                stack.add(i % len);
            }
        }
        return res;
    }
}
</code></pre>
<ul>
<li>This question is similar like <code>739. Daily Temperatures</code>.</li>
<li>Traverse the nums <code>2</code> times.</li>
<li>In the for loop, always use <code>i % nums.length</code> to get the actual <code>i</code>.</li>
</ul>
<hr>
<h1 id="42-trapping-rain-water">42. Trapping Rain Water</h1>
<p><a href="https://leetcode.com/problems/trapping-rain-water/">Question Link</a></p>
<pre><code class="language-java">class Solution {
    public int trap(int[] height) {
        Stack&lt;Integer&gt; stack = new Stack&lt;Integer&gt;();
        stack.push(0);

        int len = height.length;
        int sum = 0;
        for (int i = 1; i &lt; len; i++){
            if (height[i] &lt; height[stack.peek()]){
                stack.push(i);
            } else if (height[i] == height[stack.peek()]){
                stack.pop();
                stack.push(i);
            } else {
                while(!stack.isEmpty() &amp;&amp; height[i] &gt; height[stack.peek()]){
                    int mid = stack.pop();
                    if(!stack.isEmpty()){
                        int left = stack.peek();
                        int h = Math.min(height[left], height[i]) - height[mid];
                        int w = i - left - 1;
                        sum += h*w;
                    }
                }
                stack.push(i);
            }
        }
        return sum;
    }
}
</code></pre>
<ul>
<li>When the heights of adjacent bars are equal, the left bar can not trap the rainwater. We should pop the left bar's index and push the current bar's index. But if we don't pop the left bar's index, the result won't be affected.</li>
<li>When we calculate the volume of rain water, <code>width = right - left - 1</code></li>
<li>In the while loop, each loop is calculated by <code>row</code>.</li>
</ul>
<hr>

              </div>
              <div class="toc-container">
                <ul class="markdownIt-TOC">
<li><a href="#503-next-greater-element-ii">503. Next Greater Element II</a></li>
<li><a href="#42-trapping-rain-water">42. Trapping Rain Water</a></li>
</ul>

              </div>
            </div>
          </article>
        </div>

        
          <div class="next-post">
            <div class="next">下一篇</div>
            <a href="https://wuhumontana.github.io/post/day-58-or-739-daily-temperatures-or-496-next-greater-element-i/">
              <h3 class="post-title">
                Day 58 | 739. Daily Temperatures | 496. Next Greater Element I
              </h3>
            </a>
          </div>
        

        

        <div class="site-footer">
  Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a>
  <a class="rss" href="https://wuhumontana.github.io/atom.xml" target="_blank">
    <i class="ri-rss-line"></i> RSS
  </a>
</div>

      </div>
    </div>

    <script>
      hljs.initHighlightingOnLoad()

      let mainNavLinks = document.querySelectorAll(".markdownIt-TOC a");

      // This should probably be throttled.
      // Especially because it triggers during smooth scrolling.
      // https://lodash.com/docs/4.17.10#throttle
      // You could do like...
      // window.addEventListener("scroll", () => {
      //    _.throttle(doThatStuff, 100);
      // });
      // Only not doing it here to keep this Pen dependency-free.

      window.addEventListener("scroll", event => {
        let fromTop = window.scrollY;

        mainNavLinks.forEach((link, index) => {
          let section = document.getElementById(decodeURI(link.hash).substring(1));
          let nextSection = null
          if (mainNavLinks[index + 1]) {
            nextSection = document.getElementById(decodeURI(mainNavLinks[index + 1].hash).substring(1));
          }
          if (section.offsetTop <= fromTop) {
            if (nextSection) {
              if (nextSection.offsetTop > fromTop) {
                link.classList.add("current");
              } else {
                link.classList.remove("current");    
              }
            } else {
              link.classList.add("current");
            }
          } else {
            link.classList.remove("current");
          }
        });
      });

    </script>
  </body>
</html>
